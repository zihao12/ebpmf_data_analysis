---
title: "nips_compare_mle_eb"
author: "zihao12"
date: "2021-06-22"
output: workflowr::wflow_html
editor_options:
  chunk_output_type: console
---

## Introduction

```{r setup}
rm(list = ls())
library(fastTopics)
source("code/misc.R")
```

$K = 20$
```{r}
fitted.eb <- readRDS("output/NIPS/v0.4.5/nips_ebpmf_wbg_initLF50_K20_maxiter5000.Rds")
fitted.mle <- readRDS("output/NIPS/v0.4.5/nips_pmf_initLF50_K20_maxiter5000.Rds")
fitted.mle.m <- fastTopics::poisson2multinom(fit = pmf2fastTopics_pmf(fitted.mle))
fitted.eb.m <- fastTopics::poisson2multinom(fit = ebpmf2fastTopics_pmf(fitted.eb))
model1 = fitted.mle.m
model2 = fitted.eb.m
match_topics(F1 = model1$F, F2 = model2$F)
```

```{r fig.height=100, fig.width=10}
par(mfrow = c(20,2))
for(i in 1:20){
  plot(model1$L[,i], model2$L[,i], xlab = "L (mle)", ylab = "L (eb)", main = sprintf("topic %d", i))
  abline(a = 0, b = 1, col = "blue")
  plot(model1$F[,i], model2$F[,i], xlab = "F (mle)", ylab = "F (eb)", main = sprintf("topic %d", i))
  abline(a = 0, b = 1, col = "blue")
}
```

